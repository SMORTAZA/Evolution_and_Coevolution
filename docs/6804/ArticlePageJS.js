var ArtMetric={},App,SCM;ArtMetric.fullVersion=function(n,t){if(n.find(".widget-ArticleLevelMetrics").length<1){var i=$("#hfSiteURL");typeof i!="undefined"&&typeof i.val()!="undefined"&&i!=""&&(t="//"+i.val()+t);$.ajax({url:t,datatype:"HTML",success:function(t){n.prepend(t);setTimeout(function(){if(typeof ChartistData!="undefined"){var n=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(n){return n.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(n){return n.replace(" ","<br />")}}}]];ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},n)}},200)},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}})}};ArtMetric.limitLabels=function(){var n=$(".ct-horizontal.ct-label"),i=n.length,r=Math.ceil(i/8),t=1;n.not(":eq(0)").each(function(){t%r==0||$(this).hide();t++})};ArtMetric.createChart=function(n,t,i,r){var o=new Chartist.Line(n,t,i,r),u=0,f=25,e=250;o.on("created",function(){u=0;ArtMetric.limitLabels()});o.on("draw",function(n){(n.type==="line"||n.type==="point"||n.type==="area")&&u++;n.type==="line"?n.element.animate({opacity:{begin:u*f+150,dur:e,from:0,to:1}}):n.type==="point"?n.element.animate({x1:{begin:u*f,dur:e,from:n.x-10,to:n.x,easing:"easeOutQuart"},x2:{begin:u*f,dur:e,from:n.x-10,to:n.x,easing:"easeOutQuart"},opacity:{begin:u*f,dur:e,from:0,to:1,easing:"easeOutQuart"}}):n.type==="area"&&n.element.animate({opacity:{begin:u*f+250,dur:300,from:0,to:1}})})};ArtMetric.triggerModal=function(n,t){var u="/ThirdParty/ArticleLevelMetricsDetails?articleId="+t,i,r;ArtMetric.fullVersion(n,u);i=$(".artmet-modal");r=$("body");i.css({display:"block",opacity:1});r.addClass("metrics-modal-open")};ArtMetric.closeModal=function(){var n=$(".artmet-modal"),t=$("body");n.attr("style","");t.removeClass("metrics-modal-open")};ArtMetric.eventsToClose=function(){$(".artmet-close-modal").click(function(){ArtMetric.closeModal()});$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})};$(document).ready(function(){$(".artmet-modal-trigger, .artmet-condensed-stats .artmet-views").click(function(){var n=$(".artmet-modal-trigger").attr("data-article-id");ArtMetric.triggerModal($(".artmet-modal-contents"),n)});ArtMetric.eventsToClose()});SCM=SCM||{};SCM.Utilities=SCM.Utilities||{};SCM.Utilities.LocalStorage=function(){"use strict";function i(i,r,u){var u=u?u:t;u.setItem(n+"."+i,JSON.stringify(r))}function r(i,r){var r=r?r:t,u=r.getItem(n+"."+i);return JSON.parse(u)}function u(i,r){var r=r?r:t;r.removeItem(n+"."+i)}var n="SCM",t=window.localStorage;return{getItem:r,setItem:i,removeItem:u}}();SCM=SCM||{};App=App||{},function(n,t,i,r){var u="instOpenUrlKey_";n.replaceOpenUrlPlaceHolders=function(n,i){i!==null&&i!==""&&n.each(function(){var n=t(this).attr("data-targetId"),r=i.replace("{openUrlTargetId}",n);t(this).html(r);t(this).parent().show()})};n.getAndReplaceOpenUrlPlaceHolders=function(r){t.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(t){if(t!==null&&t!=="undefined"){var f="";t.DisplayOpenUrlLink==!0&&(f=t.LinkImageSource!==null&&t.LinkImageSource!==""?" <a class='open-url-link' target='_blank' href='"+t.TargetUrl+"'><img class='open-url-img' src='"+t.LinkImageSource+"' alt='open URL link' /><\/a> ":" <a class='open-url-link' target='_blank' href='"+t.TargetUrl+"'> "+t.LinkImageText+" <\/a> ");n.replaceOpenUrlPlaceHolders(r,f);i!==null&&window.sessionStorage!==null&&typeof window.App.LoginUserInfo!="undefined"&&typeof window.App.LoginUserInfo.currentSessionId!="undefined"&&i.setItem(u+window.App.LoginUserInfo.currentSessionId,f,window.sessionStorage)}},error:function(){}})};n.checkAndReplaceOpenUrlPlaceHolders=function(){var f,e;typeof window.App.LoginUserInfo!="undefined"&&window.App.LoginUserInfo.isInstLoggedIn>0&&(f=t('span[class="inst-open-url-holders"]'),f!==null&&f!==r&&f.length>0&&(i!==null&&window.sessionStorage!==null&&typeof window.App.LoginUserInfo.currentSessionId!="undefined"?(e=i.getItem(u+window.App.LoginUserInfo.currentSessionId,window.sessionStorage),e!==null?n.replaceOpenUrlPlaceHolders(f,e):n.getAndReplaceOpenUrlPlaceHolders(f)):n.getAndReplaceOpenUrlPlaceHolders(f)))};n.init=function(){n.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage);SCM=SCM||{},function(n,t,i,r){var u=t("#ArticleFullTextWrap"),f=!1;u&&u.attr("data-userHasAccess")&&(f=u.attr("data-userHasAccess").toLowerCase()==="true");n.replaceContentLinks=function(){if(!f){var n=u.find("a[data-reveal-id]");n.each(function(){t(this).replaceWith(function(){var n=this.innerHTML;return"<span>"+n+"<\/span>"})})}};n.init=function(){n.replaceContentLinks();r.init();i.init()}}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery,SCM.InstitutionOpenUrl,SCM.Utilities.Brightcove);$(document).ready(function(){var n,f;if($(".js-deepdyve-link").hide(),n=$(".js-deepdyve-link"),n.length>0){var t=n.data("doi"),i=n.data("issn"),r=n.data("fieldname"),u=n.data("affiliate");t!=null&&r!=null&&u!=null&&i!=null&&(f="https:////www.deepdyve.com/rental-link?docId="+t+"&journal="+i+"&fieldName="+r+"&affiliateId="+u+"&format=jsonp&callback=?",$.getJSON(f,function(n){n.status==="ok"&&($(".js-deepdyve-link a").attr("href",n.url),$(".js-deepdyve-link").show())}))}});$(document).ready(function(){$("a.js-view-large").on("click",function(){var n=$("#hfArticleTitle").val(),t,i;n!=null&&n!=""&&(t=$(this).attr("href"),n=encodeURIComponent(n),t.endsWith(n)||(i=t+"/"+n,$(this).attr("href",i)))})})